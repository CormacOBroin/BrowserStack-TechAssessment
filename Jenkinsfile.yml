pipeline {
	agent any
	tools{
	}
	stages {
		stage("setup"){
			steps {
				browserstack(credntialsId: '50e72f61-f2da-4397-b6cb-92e537654425', localConfig: [localOptions: '', localPath: '']){
				echo 'Setting up parameters'
					sh 'wget "https://www.browserstack.com/browserstack-local/BrowserStackLocal-win32.zip"'
                	sh 'powershell.exe D:\BrowserStackLocal.exe'
                	sh './BrowserStackLocal --key $BROWSERSTACK_ACCESS_KEY --daemon stop'
				}
				// Enable reporting in Jenkins
            	browserStackReportPublisher 'automate'
			}
		}
		stage("test"){
			steps {
				echo 'Running the application'
				mvn test -P sample-test
			}
		}
		stage("deploy"){
			steps {
				echo 'deploying the application'
			}
		}
	}
}
